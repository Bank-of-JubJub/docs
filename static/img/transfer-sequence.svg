<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="683" height="785"><desc>title%20Bank%20of%20JubJub%0A%0Aactor%20Alice%0Aactor%20Relayer%0Aactor%20Processor%0Aparticipant%20Bank%20of%20JubJub%0Aparticipant%20ERC20%0A%0A%3D%3DTransfer%3D%3D%0AAlice-%3ERelayer%3A%20transferProof%0Anote%20over%20Relayer%3A%20receives%20proof%20off-chain%5Cnthis%20can%20hide%20tx%20origin%0ARelayer-%3EBank%20of%20JubJub%3A%20transfer%0ABank%20of%20JubJub-%3EBank%20of%20JubJub%3A%20addPendingTransfer%0ABank%20of%20JubJub-%3EERC20%3Atransfer(relayerFee)%0AERC20--%3ERelayer%3ArelayerFee%0Anote%20over%20Bank%20of%20JubJub%3A%20Step%201%20complete%0AProcessor-%3EBank%20of%20JubJub%3A%20processPendingTransfers%0ABank%20of%20JubJub-%3EBank%20of%20JubJub%3A%20updateEncBalance%0ABank%20of%20JubJub-%3EERC20%3A%20transfer(processFee)%0AERC20--%3EProcessor%3A%20processFee</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="683" height="785"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="265.8989779079043" y="22.6179738" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bank of JubJub</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 23.422892410058594 118.895148942 L 23.422892410058594 785.3714435820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 148.34975617841798 118.895148942 L 148.34975617841798 785.3714435820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 253.03561238791016 118.895148942 L 253.03561238791016 785.3714435820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 459.70242061427734 118.895148942 L 459.70242061427734 785.3714435820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 635.933315754707 118.895148942 L 635.933315754707 785.3714435820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="11.598960923076923,5.0262164"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 32.01772245405859 55.112462826000005 A 8.594830044 8.594830044 0 1 1 32.01771815664393 55.10386799738847 M 23.422892410058594 63.70729287 L 23.422892410058594 82.103244894 M 12.566264986058593 70.34189851800001 L 34.2795198340586 70.34189851800001 M 23.422892410058594 82.103244894 L 12.566264986058593 99.29290498200001 M 23.422892410058594 82.103244894 L 34.2795198340586 99.29290498200001" stroke-miterlimit="10" stroke-width="2.5633703640000003" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="7.5393246000000005" y="114.37155418200001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 156.94458622241797 55.112462826000005 A 8.594830044 8.594830044 0 1 1 156.94458192500332 55.10386799738847 M 148.34975617841798 63.70729287 L 148.34975617841798 82.103244894 M 137.49312875441797 70.34189851800001 L 159.206383602418 70.34189851800001 M 148.34975617841798 82.103244894 L 137.49312875441797 99.29290498200001 M 148.34975617841798 82.103244894 L 159.206383602418 99.29290498200001" stroke-miterlimit="10" stroke-width="2.5633703640000003" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="123.09849732832032" y="114.37155418200001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Relayer</text></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 261.6304424319102 55.112462826000005 A 8.594830044 8.594830044 0 1 1 261.6304381344955 55.10386799738847 M 253.03561238791016 63.70729287 L 253.03561238791016 82.103244894 M 242.17898496391015 70.34189851800001 L 263.89223981191014 70.34189851800001 M 253.03561238791016 82.103244894 L 242.17898496391015 99.29290498200001 M 253.03561238791016 82.103244894 L 263.89223981191014 99.29290498200001" stroke-miterlimit="10" stroke-width="2.5633703640000003" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="220.0483153298047" y="114.37155418200001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Processor</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 392.8252557879414 78.182796102 L 526.5795854406133 78.182796102 L 526.5795854406133 118.89514894199999 L 392.8252557879414 118.89514894199999 L 392.8252557879414 78.182796102 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="409.1855901699414" y="103.816499742" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bank of JubJub</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 595.9497971686054 78.182796102 L 675.9168343408086 78.182796102 L 675.9168343408086 118.89514894199999 L 595.9497971686054 118.89514894199999 L 595.9497971686054 78.182796102 Z" stroke-miterlimit="10" stroke-width="2.4125838720000004" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="612.3101315506054" y="103.816499742" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ERC20</text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 7.5393246000000005 161.366677522 L 675.4606754 161.366677522 M 7.5393246000000005 166.392893922 L 675.4606754 166.392893922 M 7.5393246000000005 171.41911032200002 L 675.4606754 171.41911032200002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 293.37823340515627 149.052447342 L 389.62176659484373 149.052447342 L 389.62176659484373 183.733340502 L 293.37823340515627 183.733340502 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="314.48834228515625" y="170.162556222" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Transfer</text></g><g><g><rect fill="white" stroke="none" x="41.26596063005859" y="206.351314302" width="89.24072732835937" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="43.52775801005859" y="219.922098582" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transferProof</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 23.422892410058594 225.953558262 L 135.935001670418 225.953558262" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(148.34975617841798,225.953558262) translate(-148.34975617841798,-225.953558262)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 135.78421517841798 219.670787762 L 148.34975617841798 225.953558262 L 135.78421517841798 232.236328762 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 51.20322456892579 248.57153206200002 L 231.92550350791015 248.57153206200002 L 245.49628778791015 262.142316342 L 245.49628778791015 298.33107442200003 L 51.20322456892579 298.33107442200003 L 51.20322456892579 248.57153206200002 M 231.92550350791015 248.57153206200002 L 231.92550350791015 262.142316342 L 245.49628778791015 262.142316342" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="72.31333344892579" y="269.68164094200006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">receives proof off-chain</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="72.31333344892579" y="284.76029014200003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">this can hide tx origin</text></g><g><g><rect fill="white" stroke="none" x="276.92094537425777" y="320.94904822200004" width="54.21028604417969" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="279.1827427542578" y="334.5198325020001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 148.34975617841798 340.55129218200005 L 447.28766610627736 340.55129218200005" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(459.70242061427734,340.55129218200005) translate(-459.70242061427734,-340.55129218200005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 447.13687961427735 334.268521682 L 459.70242061427734 340.55129218200005 L 447.13687961427735 346.8340626820001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="477.5454888342773" y="363.16926598200007" width="136.78752603441407" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="479.8072862142773" y="376.74005026200007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addPendingTransfer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 459.70242061427734 382.7715099420001 L 520.0170174142773 382.7715099420001 L 520.0170174142773 402.3737539020001 L 472.11717512227733 402.3737539020001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(459.70242061427734,402.3737539020001) translate(-459.70242061427734,-402.3737539020001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 472.26796161427734 396.09098340200006 L 459.70242061427734 402.3737539020001 L 472.26796161427734 408.6565244020001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="480.8052163123047" y="424.9917277020001" width="134.025303744375" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="483.0670136923047" y="438.56251198200016" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(relayerFee)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 459.70242061427734 444.5939716620001 L 623.518561246707 444.5939716620001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(635.933315754707,444.5939716620001) translate(-635.933315754707,-444.5939716620001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3677747547069 438.3112011620001 L 635.933315754707 444.5939716620001 L 623.3677747547069 450.87674216200014 Z"/></g></g><g><g><rect fill="white" stroke="none" x="354.85287548841796" y="467.21194546200013" width="74.57732095628906" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="357.114672868418" y="480.78272974200013" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">relayerFee</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 635.933315754707 486.81418942200014 L 160.76451068641796 486.81418942200014" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(148.34975617841798,486.81418942200014) translate(-148.34975617841798,-486.81418942200014)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 160.91529717841797 480.5314189220001 L 148.34975617841798 486.81418942200014 L 160.91529717841797 493.09695992200017 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 385.63515841396486 509.4321632220002 L 520.1988985345898 509.4321632220002 L 533.7696828145898 523.0029475020002 L 533.7696828145898 544.1130563820002 L 385.63515841396486 544.1130563820002 L 385.63515841396486 509.4321632220002 M 520.1988985345898 509.4321632220002 L 520.1988985345898 523.0029475020002 L 533.7696828145898 523.0029475020002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="406.74526729396484" y="530.5422721020002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Step 1 complete</text></g><g><g><rect fill="white" stroke="none" x="270.87868060791016" y="566.7310301820002" width="170.9806717863672" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="273.1404779879102" y="580.3018144620002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">processPendingTransfers</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 253.03561238791016 586.3332741420002 L 447.28766610627736 586.3332741420002" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(459.70242061427734,586.3332741420002) translate(-459.70242061427734,-586.3332741420002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 447.13687961427735 580.0505036420002 L 459.70242061427734 586.3332741420002 L 447.13687961427735 592.6160446420001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="477.5454888342773" y="608.9512479420001" width="127.57025613695312" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="479.8072862142773" y="622.5220322220001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">updateEncBalance</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 459.70242061427734 628.5534919020001 L 520.0170174142773 628.5534919020001 L 520.0170174142773 648.1557358620001 L 472.11717512227733 648.1557358620001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(459.70242061427734,648.1557358620001) translate(-459.70242061427734,-648.1557358620001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 472.26796161427734 641.8729653620002 L 459.70242061427734 648.1557358620001 L 472.26796161427734 654.4385063620001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="477.54548883427736" y="670.7737096620001" width="140.5447587004297" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="479.8072862142774" y="684.3444939420001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">transfer(processFee)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 459.70242061427734 690.3759536220001 L 623.518561246707 690.3759536220001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><g transform="translate(635.933315754707,690.3759536220001) translate(-635.933315754707,-690.3759536220001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 623.3677747547069 684.0931831220001 L 635.933315754707 690.3759536220001 L 623.3677747547069 696.6587241220001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="403.9360761151367" y="712.9939274220001" width="81.09677591234374" height="19.602243960000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="406.1978734951367" y="726.5647117020001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">processFee</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 635.933315754707 732.5961713820001 L 265.4503668959102 732.5961713820001" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="6.03145968"/><g transform="translate(253.03561238791016,732.5961713820001) translate(-253.03561238791016,-732.5961713820001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 265.6011533879102 726.3134008820001 L 253.03561238791016 732.5961713820001 L 265.6011533879102 738.878941882 Z"/></g></g></g><g/><g/><g/><g/><g/></g></svg>